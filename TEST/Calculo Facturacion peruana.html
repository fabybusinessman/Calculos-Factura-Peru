!DOCTYPE html
html lang=es
head
    meta charset=UTF-8
    meta name=viewport content=width=device-width, initial-scale=1.0
    titleCalculadora de Facturación Peruanatitle
    script src=httpscdn.tailwindcss.comscript
    link href=httpsfonts.googleapis.comcss2family=Interwght@400;600&display=swap rel=stylesheet
    style
        body {
            font-family 'Inter', sans-serif;
            background-color #f4f7f6;
            display flex;
            justify-content center;
            align-items center;
            min-height 100vh;
            padding 20px;
        }
        .container {
            background-color #ffffff;
            padding 30px;
            border-radius 12px;
            box-shadow 0 4px 8px rgba(0, 0, 0, 0.1);
            width 100%;
            max-width 500px;
        }
        label {
            display block;
            margin-bottom 8px;
            font-weight 600;
            color #333;
        }
        input[type=text], input[type=number] {
            width 100%;
            padding 10px;
            margin-bottom 20px;
            border 1px solid #d1d5db;
            border-radius 6px;
            box-sizing border-box;  Asegura que el padding no afecte el ancho total 
        }
        button {
            background-color #10b981;  green-500 
            color white;
            padding 12px 20px;
            border none;
            border-radius 6px;
            cursor pointer;
            font-size 16px;
            font-weight 600;
            transition background-color 0.3s ease;
            width 100%;
        }
        buttonhover {
            background-color #059669;  green-600 
        }
        .result {
            margin-top 20px;
            padding 15px;
            background-color #e2e8f0;  slate-200 
            border-radius 6px;
            font-weight 600;
            color #1e293b;  slate-800 
        }
        .result span {
            font-weight 400;
        }
    style
head
body

    div class=container
        h1 class=text-2xl font-bold mb-6 text-center text-gray-800Calculadora de Facturación Peruanah1

        div class=mb-4
            label for=salesValueUSDValor de la Venta (USD)label
            input type=number id=salesValueUSD placeholder=Ingrese el valor de la venta en USD class=border-gray-300
        div

        div class=mb-4
            label for=igvValueIGV 18% (USD)label
            input type=text id=igvValue readonly class=bg-gray-100 cursor-not-allowed
        div

        div class=mb-4
            label for=totalAmountUSDImporte Total (USD)label
            input type=text id=totalAmountUSD readonly class=bg-gray-100 cursor-not-allowed
        div

        div class=mb-4
            label for=tractionValuePENPorcentaje de Tracción 12% (PEN - Aproximado al Entero)label
            input type=text id=tractionValuePEN readonly class=bg-gray-100 cursor-not-allowed
        div

        div class=mb-4
            label for=creditValuePENCrédito (PEN)label
            input type=text id=creditValuePEN readonly class=bg-gray-100 cursor-not-allowed
        div

        button onclick=calculateInvoice()Calcularbutton

        div class=result id=netAmountDue
            Monto Neto Pendiente de Pago span id=netAmountPEN--span
        div
         div class=text-sm text-gray-600 mt-4 text-center
            Nota Se utiliza un tipo de cambio fijo (1 USD = 3.683 PEN) para la conversión a PEN en la Tracción. El porcentaje de tracción se calcula sobre el Importe Total (PEN) y se redondea al entero más cercano. El crédito es el 88% del Importe Total (USD) mostrado en PEN.
        div
    div

    script
         Función para realizar los cálculos
        function calculateInvoice() {
             Obtener el valor de venta del campo de entrada y convertirlo a número
            const salesValueUSDInput = document.getElementById('salesValueUSD');
            const salesValueUSD = parseFloat(salesValueUSDInput.value);

             Validar si el valor ingresado es un número válido
            if (isNaN(salesValueUSD)  salesValueUSD  0) {  Añadida validación para números negativos
                alert('Por favor, ingrese un valor numérico válido y positivo para el Valor de la Venta.');
                 Limpiar campos de resultado si el valor no es válido
                document.getElementById('igvValue').value = '';
                document.getElementById('totalAmountUSD').value = '';
                document.getElementById('tractionValuePEN').value = '';
                document.getElementById('creditValuePEN').value = '';  Limpiar el nuevo campo de crédito
                document.getElementById('netAmountPEN').innerText = '--';
                return;  Detener la ejecución si el valor no es válido
            }

             Tipo de cambio asumido
            const exchangeRateUSDToPEN = 3.683;  Ejemplo 1 USD = 3.683 PEN

             Calcular IGV (18% del valor de venta en USD)
            const igvValueUSD = salesValueUSD  0.18;

             Calcular el Importe Total en USD (Valor de Venta + IGV)
            const totalAmountUSD = salesValueUSD + igvValueUSD;

             Convertir el Importe Total a PEN (base para la tracción)
            const totalAmountPEN = totalAmountUSD  exchangeRateUSDToPEN;

             Calcular el porcentaje de tracción (12% del Importe Total en PEN)
             Este valor se redondea para mostrarlo
            let tractionValuePEN_rounded = totalAmountPEN  0.12;
            tractionValuePEN_rounded = Math.round(tractionValuePEN_rounded);

             Calcular el Crédito (88% del Importe Total en USD)
             Basado en el ejemplo donde 118 USD de Importe Total da 103.84
            const creditValueUSD_calculated = totalAmountUSD  0.88;

             Mostrar el Crédito calculado en USD, pero etiquetado como PEN según la solicitud
            const creditValuePEN_display = creditValueUSD_calculated;


             El Monto Neto Pendiente de Pago es igual al Crédito
            const netAmountDuePEN = creditValuePEN_display;

             Mostrar los resultados en los campos de texto y el área de resultado
            document.getElementById('igvValue').value = igvValueUSD.toFixed(2) + ' USD';
            document.getElementById('totalAmountUSD').value = totalAmountUSD.toFixed(2) + ' USD';  Mostrar el importe total
            document.getElementById('tractionValuePEN').value = tractionValuePEN_rounded.toFixed(0) + ' PEN';  Mostrar la tracción redondeada sin decimales
            document.getElementById('creditValuePEN').value = creditValuePEN_display.toFixed(2) + ' PEN';  Mostrar el valor del crédito con 2 decimales
            document.getElementById('netAmountPEN').innerText = netAmountDuePEN.toFixed(2) + ' PEN';  Mostrar el monto neto pendiente con 2 decimales
        }

         No ejecutar el cálculo al cargar la página inicialmente, esperamos la entrada del usuario
         window.onload = calculateInvoice;  Comentado para no calcular automáticamente al cargar
    script

body
html
